{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["import * as playwright from \"playwright\";\nimport {Browser, BrowserContext, BrowserType, ConsoleMessage, devices, LaunchOptions, Page, Request} from \"playwright\";\nimport {basename, dirname, resolve} from \"node:path\";\nimport {readFileSync} from \"node:fs\";\nimport {fontscript} from \"./critical\";\nimport {size} from \"./file\";\nimport type {\n    BrowserOptions,\n    CriticalCliResult,\n    CriticalCliStats,\n    CriticalDimension,\n    CriticalExtractOptions,\n    CriticalOptions,\n    CriticalResult,\n    FontObject\n} from \"./@types\";\nimport chalk from \"chalk\";\nimport {AstRule, EnumToken, expand, parse, render, transform, walk} from \"@tbela99/css-parser\";\nimport {createRequire} from 'node:module';\nimport {mkdir, mkdtemp, rm, writeFile} from 'node:fs/promises';\nimport {tmpdir} from 'node:os';\nimport process from \"node:process\";\nimport {Buffer} from \"node:buffer\";\n\nconst __dirname: string = dirname(new URL(import.meta.url).pathname);\nconst require = createRequire(import.meta.url);\n\nconst script: string = readFileSync(require.resolve('@tbela99/critical/umd'), {encoding: \"utf-8\"});\n\n// @ts-ignore\nconst deviceNames: Array<{\n    userAgent: string;\n    viewport: any[];\n    screen: any[];\n    deviceScaleFactor: number;\n    isMobile: boolean;\n    hasTouch: boolean;\n    defaultBrowserType: string;\n}> = Object.values(devices);\n\ninterface Document {\n\n}\n\ninterface DocumentType {\n    /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/DocumentType/publicId) */\n    readonly publicId: string;\n    /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/DocumentType/systemId) */\n    readonly systemId: string;\n}\n\nasync function sleep(duration: number) {\n\n    return new Promise(resolve => setTimeout(resolve, duration + Math.ceil(Math.random() * 10)));\n}\n\nasync function createBrowser(options: CriticalOptions, dimension: CriticalDimension, chromium: BrowserType, browserName: \"chromium\" | \"firefox\" | \"webkit\" | \"edge\" | \"chrome\"): Promise<{\n\n    browser: Browser,\n    context: BrowserContext,\n    page: Page\n}> {\n    const launchOptions: LaunchOptions = <LaunchOptions>{\n        headless: options.headless,\n        bypassCSP: !options.secure,\n        defaultViewport: {\n            isMobile: true,\n            isLandscape: false,\n        },\n        waitForInitialPage: false,\n        args: <string[]>[],\n        ignoreDefaultArgs: ['--enable-automation']\n    };\n\n    launchOptions.args = [\n        '--test-type',\n        '--no-startup-window',\n        `--window-size=${(<CriticalDimension>dimension).width},${(<CriticalDimension>dimension).height}`\n    ];\n\n    if (!options.secure) {\n\n        launchOptions.args.push(\n            '--disable-web-security',\n            '--allow-running-insecure-content',\n            '--no-default-browser-check',\n            '--ignore-certificate-errors',\n            '--disable-site-isolation-trials'\n        )\n    }\n\n    if (options.container) {\n\n        launchOptions.args.push(\n            \"--disable-gpu\",\n            \"--disable-dev-shm-usage\",\n            \"--disable-setuid-sandbox\",\n            \"--no-sandbox\"\n        )\n    }\n\n    let contextData = {};\n\n    if (options.browserType != null || options.randomUserAgent || options.randomBrowser) {\n\n        contextData = deviceNames.slice().sort(() => [-1, 0, 1][Math.floor(3 * Math.random())]).filter(d => {\n\n            if (browserName != d.defaultBrowserType) {\n\n                return false;\n            }\n\n            if (options.browserType != null) {\n\n                if (options.browserType == 'mobile') {\n\n                    return d.isMobile;\n                } else {\n\n                    return !d.isMobile;\n                }\n            }\n\n            return true;\n        })[0];\n    }\n\n    const browser: Browser = <Browser>await chromium.launch(launchOptions);\n    const context: BrowserContext = <BrowserContext>await browser.newContext({\n        ...contextData,\n        bypassCSP: !options.secure,\n        viewport: dimension\n    });\n\n    if (options.randomUserAgent) {\n\n        // antibot evasion\n        await context.addInitScript(() => {\n\n            Object.defineProperty(navigator, 'webdriver', {get: () => undefined});\n        });\n    }\n\n    const page: Page = await context.newPage();\n    return {browser, context, page};\n}\n\nexport async function critical(options: CriticalOptions): Promise<CriticalCliResult>;\nexport async function critical(url: string, options: CriticalOptions): Promise<CriticalCliResult>;\n\nexport async function critical(url: string | CriticalOptions, options: CriticalOptions = {}): Promise<CriticalCliResult> {\n\n    if (typeof url === 'object') {\n\n        options = <CriticalOptions>url;\n        url = <string>options.url;\n    }\n\n    let html: string = '';\n    let fonts: Set<string> = new Set<string>;\n\n    const styles: Set<string> = new Set<string>;\n    const stats: CriticalCliStats[] = [];\n    const browserName: BrowserOptions = <BrowserOptions>(options.randomBrowser ? ['chromium', 'firefox', 'webkit', 'edge', 'chrome'][Math.floor(Math.random() * 5)] : options.browser ?? 'chromium');\n    const chromium: BrowserType = <BrowserType>(['chromium', 'firefox', 'webkit', 'edge', 'chrome'].includes(browserName) &&\n        // @ts-ignore\n        playwright[browserName]) ?? <string>playwright.chromium ?? 'chromium';\n\n    if (options.input != null) {\n\n        const browser: Browser = <Browser>await chromium.launch({headless: true});\n        const context: BrowserContext = <BrowserContext>await browser.newContext();\n\n        const page: Page = await context.newPage();\n\n        await page.goto(options.input.startsWith('data:') ? options.input : 'data:text/html;base64,' + Buffer.from(options.input).toString('base64'), {waitUntil: 'networkidle'});\n\n        let base: string = options.base ?? 'file://' + process.cwd();\n\n        if (!base.endsWith('/')) {\n\n            base += '/';\n        }\n\n        if (!base.match(/^(([a-zA-Z]+:)?\\/)?\\//)) {\n\n            base = 'file://' + process.cwd() + '/' + base;\n        }\n\n        options.input = await page.evaluate((base: string) => {\n\n            // @ts-ignore\n            const baseElement = (document.querySelector('base') ?? document.head.insertBefore(document.createElement('base'), document.head.firstChild)) as HTMLBaseElement;\n            baseElement.href = base;\n\n            // @ts-ignore\n            const doctype = document.doctype as DocumentType;\n            // @ts-ignore\n            return `<!Doctype ${doctype.name}`\n                + (doctype.publicId ? ` PUBLIC \"${doctype.publicId}\"` : '')\n                + (doctype.systemId\n                    ? (doctype.publicId ? `` : ` SYSTEM`) + ` \"${doctype.systemId}\"`\n                    : ``)\n                // @ts-ignore\n                + `>` + '\\n' + document.documentElement.outerHTML\n        }, base) as string;\n\n        const dir: string = await mkdtemp(tmpdir() + '/');\n\n        await writeFile(dir + '/index.html', options.input);\n        url = 'file://' + dir + '/index.html';\n\n        // @ts-ignore\n        process.on('exit', async () => await rm(dir, {recursive: true, force: true}));\n        // @ts-ignore\n        process.on('uncaughtException', async () => await rm(dir, {recursive: true, force: true}));\n        // @ts-ignore\n        process.on('unhandledRejection', async () => await rm(dir, {recursive: true, force: true}));\n\n        await page.close();\n        await context.close();\n        await browser.close();\n    }\n\n    if (['\"', \"'\"].includes(url.charAt(0))) {\n\n        // @ts-ignore\n        url = url.replace(/^(['\"])([^\\1\\s]+)\\1$/, '$2');\n    }\n\n    if (!url.match(/^([a-zA-Z]+:)?\\/\\//)) {\n\n        url = 'file://' + (url.charAt(0) == '/' ? url : resolve(__dirname + '/' + url));\n    }\n\n    options = {\n\n        headless: true,\n        randomBrowser: false,\n        fonts: true,\n        screenshot: false,\n        console: false,\n        secure: false,\n        filename: '',\n        container: false,\n        html: false,\n        pause: 30,\n        verbose: false,\n        colorScheme: 'dark',\n        output: 'output/', ...options, browser: browserName\n    };\n\n    let theUrl: URL = new URL(url);\n    let filePath: string = <string>options.output + ((<string>options.output).endsWith('/') ? '' : '/') + browserName + (options.browserType != null ? '-' + options.browserType : '') + ('/' + options.colorScheme);\n    let shortUrl: string = theUrl.protocol == 'data:' ? 'data.html' : (theUrl.protocol == 'file:' ? basename(theUrl.pathname) : theUrl.protocol + '//' + theUrl.host + theUrl.pathname);\n    let dimensions: string | string[] | Array<CriticalDimension>;\n\n    if (filePath.slice(-1) != '/') {\n\n        filePath += '/';\n    }\n\n    if (theUrl.host !== '') {\n\n        filePath += theUrl.host.replace(':', '@') + '/';\n    } else {\n\n        filePath += 'local_files/';\n    }\n\n    if (theUrl.pathname != '/') {\n\n        filePath += basename(theUrl.pathname).replace(/\\.[a-z]{1,4}$/, '').replace(/^[^a-zA-Z0-9_-]+/, '').replace(/[^a-zA-Z0-9_-]+/, '-');\n    } else {\n\n        filePath += 'index'\n    }\n\n    // @ts-ignore\n    filePath = filePath.replace(/[/]+$/, '');\n\n    await mkdir(dirname(filePath), {recursive: true});\n\n    options.filename = filePath;\n\n    if (options.base != null) {\n\n        if (!options.base.match(/^([a-z]+:\\/)?\\//)) {\n\n            const parts1: string[] = (filePath.endsWith('/') ? filePath.slice(0, -1) : filePath).split('/');\n            const parts2: string[] = (options.base.endsWith('/') ? options.base.slice(0, -1) : options.base).split('/');\n\n            const result: string[] = [];\n\n            parts1.pop();\n\n            while (parts1.shift()) {\n\n                result.push('..');\n            }\n\n            result.push(...parts2);\n\n            options.base = result.join('/');\n        }\n    }\n\n    if ('dimensions' in options) {\n\n        dimensions = <string | string[] | Array<CriticalDimension>>options.dimensions;\n    } else {\n\n        dimensions = Number.isInteger(options.width) && Number.isInteger(options.height) ? [{\n            width: +<number>options.width,\n            height: +<number>options.height\n        }] : ['1920x1080', '1440x900', '1366x768', '1024x768', '768x1024', '320x480'];\n    }\n\n    if (dimensions.length == 0) {\n\n        throw new Error(`No dimensions specified`);\n    }\n\n    if (typeof dimensions == 'string') {\n\n        dimensions = (<string>dimensions).split(/\\s/)\n    } else if (!Array.isArray(dimensions)) {\n\n        dimensions = [dimensions];\n    }\n\n    dimensions = dimensions.map((dimension: string | CriticalDimension): CriticalDimension => {\n\n        if (typeof dimension == 'string') {\n\n            const parts: string[] = dimension.split(/[xX\"']/g);\n\n            return {\n\n                width: +parts[0],\n                height: +parts[1]\n            }\n        }\n\n        return dimension;\n    });\n    dimensions.sort(() => [-1, 0, 1][Math.floor(3 * Math.random())]);\n\n    // @ts-ignore\n    for (const dimension of <CriticalDimension[]>dimensions) {\n\n        if (options.verbose || options.console) {\n\n            console.error(chalk.blue(`[${shortUrl}]> selected browser `) + chalk.green(chromium.name()));\n            console.error(chalk.blue(`[${shortUrl}${size}]> set viewport to `) + chalk.green(`${dimension.width}x${dimension.height}`));\n        }\n\n        const {browser, context, page} = await createBrowser(options, dimension, chromium, browserName);\n\n        try {\n\n            const size: string = ` (${dimension.width}x${dimension.height})`;\n\n            await context.addInitScript(script + ';window.critical=critical;');\n            await page.emulateMedia({\n                colorScheme: options.colorScheme,\n            });\n\n            if (options.console) {\n\n                page.on('console', (message: ConsoleMessage) =>\n                    // @ts-ignore\n                    console.error(chalk.yellow(`[${shortUrl}${size}]> ${message.type().replace(/^([a-z])/, (all: string, one: string) => one.toUpperCase())} ${message.text()}`)))\n                    // @ts-ignore\n                    .on('pageerror', ({message}) => console.error(chalk.red(`[${shortUrl}${size}]> ${message}`)))\n                    .on('requestfailed', (request: Request) => {\n\n                        const failure = request.failure();\n                        console.error(chalk.red(`[${shortUrl}${size}]> ${failure && failure.errorText} ${request.url()}`))\n                    });\n            }\n\n            console.error(chalk.blue(`[${shortUrl}${size}]> open `) + url);\n\n            if (options.input != null) {\n\n                const dir: string = await mkdtemp(tmpdir() + '/');\n\n                await writeFile(dir + '/index.html', options.input);\n                url = 'file://' + dir + '/index.html';\n\n                // @ts-ignore\n                process.on('exit', async () => await rm(dir, {recursive: true}));\n                // @ts-ignore\n                process.on('uncaughtException', async () => await rm(dir, {recursive: true}));\n                // @ts-ignore\n                process.on('unhandledRejection', async () => await rm(dir, {recursive: true}));\n            }\n\n            await page.goto(url, {waitUntil: 'networkidle'});\n\n            if (options.screenshot) {\n\n                const screenshot: {\n                    path: string\n                } = typeof options.screenshot == 'object' && Object.assign({}, options.screenshot) || {path: typeof options.screenshot == 'string' && options.screenshot || options.filename + '.png' || 'screenshot.png'}\n\n                if (dimensions.length > 1) {\n\n                    screenshot.path = screenshot.path.replace(/\\.([^.]+)$/, `_${dimension.width}x${dimension.height}.\\$1`)\n                }\n\n                if (options.verbose) {\n\n                    console.error(chalk.blue(`[${shortUrl}${size}]> generating screenshot at `) + chalk.green(screenshot.path));\n                }\n\n                await page.screenshot(screenshot);\n            }\n\n            if (options.verbose) {\n\n                console.error(chalk.blue(`[${shortUrl}${size}]> collect critical data`));\n            }\n\n            const data = await page.evaluate(async (param: { options: CriticalExtractOptions }) => {\n\n                // @ts-ignore\n                return await critical.extract(param.options).then((result: CriticalResult) => {\n\n                    if (Array.isArray(result.fonts)) {\n\n                        // @ts-ignore\n                        result.fonts = <string[]>(result.fonts).map((font: FontObject) => JSON.stringify(font));\n                    }\n\n                    // @ts-ignore\n                    if (param.options.verbose) {\n\n                        console.error(JSON.stringify({result}, null, 1));\n                    }\n\n                    return result;\n                });\n            }, {options});\n\n            if (data.styles != null) {\n\n                data.styles.forEach((line: string) => styles.add(line));\n                data.fonts.forEach((line: string) => fonts.add(line));\n                stats.push({width: dimension.width, height: dimension.height, stats: data.stats});\n\n                if (options.html != null && html === '') {\n\n                    html = data.html ?? '';\n                }\n            }\n\n        } catch (error: any) {\n\n            console.error(error);\n        } finally {\n\n            await page.close();\n            await context.close();\n            await browser.close();\n        }\n\n        if (<number>options.pause > 0) {\n\n            await sleep(<number>options.pause);\n        }\n    }\n\n    let htmlFile: string | undefined = undefined;\n    let fontJS: string | undefined = undefined;\n    let minCssFile: string | undefined = undefined;\n    let rawCssFile: string | undefined = undefined;\n    let nestedCssFile: string | undefined = undefined;\n    let minNestedCssFile: string | undefined = undefined;\n\n    if (options.filename != null) {\n\n        let rawCSS: string = [...styles].join('\\n');\n        let css: string = rawCSS;\n\n        if (options.advanced) {\n\n            const {browser, context, page} = await createBrowser(options, dimensions[0], chromium, browserName);\n\n            await page.emulateMedia({\n                colorScheme: options.colorScheme,\n            });\n\n            const dimension = dimensions[0];\n            const size: string = ` (${dimension.width}x${dimension.height})`;\n\n            console.error(chalk.blue(`[${shortUrl}${size}]> open `) + url);\n\n            if (options.input != null) {\n\n                const dir: string = await mkdtemp(tmpdir() + '/');\n\n                await writeFile(dir + '/index.html', options.input);\n                url = 'file://' + dir + '/index.html';\n\n                // @ts-ignore\n                process.on('exit', async () => await rm(dir, {recursive: true}));\n                // @ts-ignore\n                process.on('uncaughtException', async () => await rm(dir, {recursive: true, force: true}));\n                // @ts-ignore\n                process.on('unhandledRejection', async () => await rm(dir, {recursive: true, force: true}));\n            }\n\n            await page.goto(url, {waitUntil: 'networkidle'});\n\n            const result = await parse(rawCSS, {minify: false}).then(result => Object.assign(result, {ast: expand(result.ast)}));\n\n            for (const {node, parent} of walk(result.ast)) {\n\n                if (node.typ == EnumToken.RuleNodeType) {\n\n                    const filtered = await Promise.all(splitRule((node as AstRule).sel).map(async sel => {\n\n                        const rule: string[] = sel.filter(sel => !sel.match(/::?((before)|(after))/));\n\n                        if (rule.length == 0) {\n                            return sel;\n                        }\n\n                        // @ts-ignore\n                        return await page.evaluate((param: {\n                            sel: string;\n                            // @ts-ignore\n                        }): boolean => document.querySelector(param.sel) != null, {sel: rule.join('')}) ? sel : [];\n                    })).then((r: string[][]) => r.filter((r: string[]): boolean => r.length > 0));\n\n                    if (filtered.length == 0) {\n\n                        parent!.chi.splice(parent!.chi.indexOf(node), 1);\n                    } else {\n\n                        (node as AstRule).sel = filtered.reduce((acc, curr) => acc + (acc.length == 0 ? '' : ',') + curr.join(''), '');\n                    }\n                }\n            }\n\n            css = render(result.ast, {minify: false, expandNestingRules: true}).code;\n\n            await page.close();\n            await context.close();\n            await browser.close();\n        }\n\n        const {code, unminified}: {\n            code: string;\n            unminified: string\n        } = (await transform(css, {expandNestingRules: true}).then(result => {\n\n            return {code: result.code, unminified: render(result.ast, {minify: false, expandNestingRules: true}).code}\n        }));\n\n        const {code: nestedCSS, unminified: nestedUnminified}: {\n            code: string;\n            unminified: string\n        } = (await transform(css, {nestingRules: true}).then(result => {\n\n            return {code: result.code, unminified: render(result.ast, {minify: false}).code}\n        }));\n\n        let cssFile: string = options.filename;\n\n        if (cssFile.slice(-4) != '.css') {\n\n            cssFile += '.css';\n        }\n\n        minCssFile = cssFile.slice(0, -4) + '.min.css' as string;\n        rawCssFile = cssFile.slice(0, -4) + '.raw.css' as string;\n\n        minNestedCssFile = cssFile.slice(0, -4) + '.nested.min.css' as string;\n        nestedCssFile = cssFile.slice(0, -4) + '.nested.css' as string;\n\n        console.error(chalk.blue(`[${shortUrl}]> writing css at `) + chalk.green(minCssFile + ' [' + size(code.length) + ']'));\n\n        // @ts-ignore\n        await writeFile(minCssFile, code);\n\n        console.error(chalk.blue(`[${shortUrl}]> writing css at `) + chalk.green(cssFile + ' [' + size(unminified.length) + ']'));\n\n        await writeFile(cssFile, unminified);\n\n        // @ts-ignore\n        await writeFile(rawCssFile, rawCSS);\n\n        console.error(chalk.blue(`[${shortUrl}]> writing css at `) + chalk.green(minNestedCssFile + ' [' + size(nestedCSS.length) + ']'));\n        // @ts-ignore\n        await writeFile(minNestedCssFile, nestedCSS);\n\n        console.error(chalk.blue(`[${shortUrl}]> writing css at `) + chalk.green(nestedCssFile + ' [' + size(nestedUnminified.length) + ']'));\n\n        await writeFile(nestedCssFile, nestedUnminified);\n\n        // @ts-ignore\n        await writeFile(rawCssFile, rawCSS);\n\n        if (options.html != null && html != null && html !== '') {\n\n            const match: RegExpMatchArray | null = html.match(/<style data-critical=\"true\">((.|[\\r\\n])*?)<\\/style>/);\n\n            if (match) {\n\n                html = html.replace(match[0], `<style data-critical=\"true\">${css}</style>`);\n            }\n\n            htmlFile = options.filename + '.html';\n            // @ts-ignore\n            await writeFile(htmlFile, html);\n        }\n    }\n\n    const fontObjects: Set<FontObject> = <Set<FontObject>>new Set([...fonts].map((font: string) => JSON.parse(font)));\n\n    if (options.fonts) {\n\n        let fontJS: string = options.filename;\n        let data: string = '/* no font found! */';\n\n        if (fontJS.slice(-3) != '.js') {\n\n            fontJS += '.js';\n        }\n\n        if (fontObjects.size == 0) {\n\n            console.error(chalk.yellow(`[${shortUrl}]> no preload font found`));\n        } else {\n\n            data = fontscript([...fontObjects]);\n            console.error(chalk.blue(`[${shortUrl}]> writing `) + chalk.green(fontObjects.size.toString()) + chalk.blue(` preload font script at `) +\n                chalk.green(`${fontJS} [` + size(data.length) + ']'));\n        }\n\n        // @ts-ignore\n        await writeFile(fontJS, data);\n    }\n\n    return {\n        styles: [...styles],\n        files: {\n\n            html: htmlFile,\n            fonts: fontJS,\n            css: {\n\n                min: minCssFile,\n                raw: rawCssFile,\n                nested: nestedCssFile,\n                minNested: minNestedCssFile\n            }\n\n        }, fonts: [...fonts], stats, html\n    };\n}\n\nexport function isWhiteSpace(codepoint: number): boolean {\n\n    return codepoint == 0x9 || codepoint == 0x20 ||\n        // isNewLine\n        codepoint == 0xa || codepoint == 0xc || codepoint == 0xd;\n}\n\nexport function splitRule(buffer: string): string[][] {\n\n    const result: string[][] = [[]];\n    let str: string = '';\n\n    for (let i = 0; i < buffer.length; i++) {\n\n        let chr: string = buffer.charAt(i);\n\n        if (isWhiteSpace(chr.charCodeAt(0))) {\n\n            let k: number = i;\n\n            while (k + 1 < buffer.length) {\n\n                if (isWhiteSpace(buffer[k + 1].charCodeAt(0))) {\n\n                    k++;\n                    continue;\n                }\n\n                break;\n            }\n\n            if (str !== '') {\n\n                // @ts-ignore\n                result.at(-1).push(str);\n                str = '';\n            }\n\n            // @ts-ignore\n            if (result.at(-1).length > 0) {\n\n                // @ts-ignore\n                result.at(-1).push(' ');\n            }\n\n            i = k;\n            continue;\n        }\n\n        if (chr == ',') {\n\n            if (str !== '') {\n                // @ts-ignore\n                result.at(-1).push(str);\n                str = '';\n            }\n\n            result.push([]);\n            continue;\n        }\n\n        if (chr == ':') {\n\n            if (str !== '') {\n                // @ts-ignore\n                result.at(-1).push(str);\n                str = '';\n            }\n\n            if (buffer.charAt(i + 1) == ':') {\n\n                chr += buffer.charAt(++i);\n            }\n\n            str += chr;\n            continue;\n        }\n\n        str += chr;\n        if (chr == '\\\\') {\n\n            str += buffer.charAt(++i);\n            continue;\n        }\n\n        if (chr == '\"' || chr == \"'\") {\n\n            let k = i;\n            while (++k < buffer.length) {\n                chr = buffer.charAt(k);\n                str += chr;\n                if (chr == '//') {\n                    str += buffer.charAt(++k);\n                    continue;\n                }\n                if (chr == buffer.charAt(i)) {\n                    break;\n                }\n            }\n            continue;\n        }\n\n        if (chr == '(' || chr == '[') {\n            const open = chr;\n            const close = chr == '(' ? ')' : ']';\n            let inParens = 1;\n            let k = i;\n            while (++k < buffer.length) {\n                chr = buffer.charAt(k);\n                if (chr == '\\\\') {\n                    str += buffer.slice(k, k + 2);\n                    k++;\n                    continue;\n                }\n                str += chr;\n                if (chr == open) {\n                    inParens++;\n                } else if (chr == close) {\n                    inParens--;\n                }\n                if (inParens == 0) {\n                    break;\n                }\n            }\n            i = k;\n        }\n    }\n\n    if (str !== '') {\n        // @ts-ignore\n        result.at(-1).push(str);\n    }\n\n    return result;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAwBA,MAAM,SAAS,GAAW,OAAO,CAAC,IAAI,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;AACrE,MAAM,OAAO,GAAG,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAE/C,MAAM,MAAM,GAAW,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,uBAAuB,CAAC,EAAE,EAAC,QAAQ,EAAE,OAAO,EAAC,CAAC,CAAC;AAEnG;AACA,MAAM,WAAW,GAQZ,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;AAa5B,eAAe,KAAK,CAAC,QAAgB,EAAA;IAEjC,OAAO,IAAI,OAAO,CAAC,OAAO,IAAI,UAAU,CAAC,OAAO,EAAE,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;AACjG,CAAC;AAED,eAAe,aAAa,CAAC,OAAwB,EAAE,SAA4B,EAAE,QAAqB,EAAE,WAAkE,EAAA;AAM1K,IAAA,MAAM,aAAa,GAAiC;QAChD,QAAQ,EAAE,OAAO,CAAC,QAAQ;AAC1B,QAAA,SAAS,EAAE,CAAC,OAAO,CAAC,MAAM;AAC1B,QAAA,eAAe,EAAE;AACb,YAAA,QAAQ,EAAE,IAAI;AACd,YAAA,WAAW,EAAE,KAAK;AACrB,SAAA;AACD,QAAA,kBAAkB,EAAE,KAAK;AACzB,QAAA,IAAI,EAAY,EAAE;QAClB,iBAAiB,EAAE,CAAC,qBAAqB,CAAC;KAC7C,CAAC;IAEF,aAAa,CAAC,IAAI,GAAG;QACjB,aAAa;QACb,qBAAqB;AACrB,QAAA,CAAA,cAAA,EAAqC,SAAU,CAAC,KAAK,IAAwB,SAAU,CAAC,MAAM,CAAE,CAAA;KACnG,CAAC;AAEF,IAAA,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;AAEjB,QAAA,aAAa,CAAC,IAAI,CAAC,IAAI,CACnB,wBAAwB,EACxB,kCAAkC,EAClC,4BAA4B,EAC5B,6BAA6B,EAC7B,iCAAiC,CACpC,CAAA;KACJ;AAED,IAAA,IAAI,OAAO,CAAC,SAAS,EAAE;AAEnB,QAAA,aAAa,CAAC,IAAI,CAAC,IAAI,CACnB,eAAe,EACf,yBAAyB,EACzB,0BAA0B,EAC1B,cAAc,CACjB,CAAA;KACJ;IAED,IAAI,WAAW,GAAG,EAAE,CAAC;AAErB,IAAA,IAAI,OAAO,CAAC,WAAW,IAAI,IAAI,IAAI,OAAO,CAAC,eAAe,IAAI,OAAO,CAAC,aAAa,EAAE;AAEjF,QAAA,WAAW,GAAG,WAAW,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,IAAG;AAE/F,YAAA,IAAI,WAAW,IAAI,CAAC,CAAC,kBAAkB,EAAE;AAErC,gBAAA,OAAO,KAAK,CAAC;aAChB;AAED,YAAA,IAAI,OAAO,CAAC,WAAW,IAAI,IAAI,EAAE;AAE7B,gBAAA,IAAI,OAAO,CAAC,WAAW,IAAI,QAAQ,EAAE;oBAEjC,OAAO,CAAC,CAAC,QAAQ,CAAC;iBACrB;qBAAM;AAEH,oBAAA,OAAO,CAAC,CAAC,CAAC,QAAQ,CAAC;iBACtB;aACJ;AAED,YAAA,OAAO,IAAI,CAAC;AAChB,SAAC,CAAC,CAAC,CAAC,CAAC,CAAC;KACT;IAED,MAAM,OAAO,GAAqB,MAAM,QAAQ,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;AACvE,IAAA,MAAM,OAAO,GAAmC,MAAM,OAAO,CAAC,UAAU,CAAC;AACrE,QAAA,GAAG,WAAW;AACd,QAAA,SAAS,EAAE,CAAC,OAAO,CAAC,MAAM;AAC1B,QAAA,QAAQ,EAAE,SAAS;AACtB,KAAA,CAAC,CAAC;AAEH,IAAA,IAAI,OAAO,CAAC,eAAe,EAAE;;AAGzB,QAAA,MAAM,OAAO,CAAC,aAAa,CAAC,MAAK;AAE7B,YAAA,MAAM,CAAC,cAAc,CAAC,SAAS,EAAE,WAAW,EAAE,EAAC,GAAG,EAAE,MAAM,SAAS,EAAC,CAAC,CAAC;AAC1E,SAAC,CAAC,CAAC;KACN;AAED,IAAA,MAAM,IAAI,GAAS,MAAM,OAAO,CAAC,OAAO,EAAE,CAAC;AAC3C,IAAA,OAAO,EAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAC,CAAC;AACpC,CAAC;AAKM,eAAe,QAAQ,CAAC,GAA6B,EAAE,UAA2B,EAAE,EAAA;AAEvF,IAAA,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;QAEzB,OAAO,GAAoB,GAAG,CAAC;AAC/B,QAAA,GAAG,GAAW,OAAO,CAAC,GAAG,CAAC;KAC7B;IAED,IAAI,IAAI,GAAW,EAAE,CAAC;AACtB,IAAA,IAAI,KAAK,GAAgB,IAAI,GAAW,CAAC;AAEzC,IAAA,MAAM,MAAM,GAAgB,IAAI,GAAW,CAAC;IAC5C,MAAM,KAAK,GAAuB,EAAE,CAAC;AACrC,IAAA,MAAM,WAAW,IAAoC,OAAO,CAAC,aAAa,GAAG,CAAC,UAAU,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,OAAO,IAAI,UAAU,CAAC,CAAC;AACjM,IAAA,MAAM,QAAQ,GAA6B,CAAC,CAAC,UAAU,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC;;QAEjH,UAAU,CAAC,WAAW,CAAC,KAAa,UAAU,CAAC,QAAQ,IAAI,UAAU,CAAC;AAE1E,IAAA,IAAI,OAAO,CAAC,KAAK,IAAI,IAAI,EAAE;AAEvB,QAAA,MAAM,OAAO,GAAqB,MAAM,QAAQ,CAAC,MAAM,CAAC,EAAC,QAAQ,EAAE,IAAI,EAAC,CAAC,CAAC;AAC1E,QAAA,MAAM,OAAO,GAAmC,MAAM,OAAO,CAAC,UAAU,EAAE,CAAC;AAE3E,QAAA,MAAM,IAAI,GAAS,MAAM,OAAO,CAAC,OAAO,EAAE,CAAC;AAE3C,QAAA,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC,KAAK,GAAG,wBAAwB,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,EAAC,SAAS,EAAE,aAAa,EAAC,CAAC,CAAC;AAE1K,QAAA,IAAI,IAAI,GAAW,OAAO,CAAC,IAAI,IAAI,SAAS,GAAG,OAAO,CAAC,GAAG,EAAE,CAAC;QAE7D,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;YAErB,IAAI,IAAI,GAAG,CAAC;SACf;QAED,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,uBAAuB,CAAC,EAAE;YAEtC,IAAI,GAAG,SAAS,GAAG,OAAO,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC;SACjD;QAED,OAAO,CAAC,KAAK,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAY,KAAI;;AAGjD,YAAA,MAAM,WAAW,IAAI,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CAAoB,CAAC;AAChK,YAAA,WAAW,CAAC,IAAI,GAAG,IAAI,CAAC;;AAGxB,YAAA,MAAM,OAAO,GAAG,QAAQ,CAAC,OAAuB,CAAC;;AAEjD,YAAA,OAAO,CAAa,UAAA,EAAA,OAAO,CAAC,IAAI,CAAE,CAAA;AAC5B,mBAAC,OAAO,CAAC,QAAQ,GAAG,CAAA,SAAA,EAAY,OAAO,CAAC,QAAQ,CAAG,CAAA,CAAA,GAAG,EAAE,CAAC;mBACxD,OAAO,CAAC,QAAQ;AACf,sBAAE,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAA,CAAE,GAAG,SAAS,IAAI,KAAK,OAAO,CAAC,QAAQ,CAAG,CAAA,CAAA;sBAC9D,EAAE,CAAC;;kBAEP,CAAG,CAAA,CAAA,GAAG,IAAI,GAAG,QAAQ,CAAC,eAAe,CAAC,SAAS,CAAA;SACxD,EAAE,IAAI,CAAW,CAAC;QAEnB,MAAM,GAAG,GAAW,MAAM,OAAO,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC,CAAC;QAElD,MAAM,SAAS,CAAC,GAAG,GAAG,aAAa,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC;AACpD,QAAA,GAAG,GAAG,SAAS,GAAG,GAAG,GAAG,aAAa,CAAC;;QAGtC,OAAO,CAAC,EAAE,CAAC,MAAM,EAAE,YAAY,MAAM,EAAE,CAAC,GAAG,EAAE,EAAC,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAC,CAAC,CAAC,CAAC;;QAE9E,OAAO,CAAC,EAAE,CAAC,mBAAmB,EAAE,YAAY,MAAM,EAAE,CAAC,GAAG,EAAE,EAAC,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAC,CAAC,CAAC,CAAC;;QAE3F,OAAO,CAAC,EAAE,CAAC,oBAAoB,EAAE,YAAY,MAAM,EAAE,CAAC,GAAG,EAAE,EAAC,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAC,CAAC,CAAC,CAAC;AAE5F,QAAA,MAAM,IAAI,CAAC,KAAK,EAAE,CAAC;AACnB,QAAA,MAAM,OAAO,CAAC,KAAK,EAAE,CAAC;AACtB,QAAA,MAAM,OAAO,CAAC,KAAK,EAAE,CAAC;KACzB;AAED,IAAA,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE;;QAGpC,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,sBAAsB,EAAE,IAAI,CAAC,CAAC;KACnD;IAED,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,oBAAoB,CAAC,EAAE;AAElC,QAAA,GAAG,GAAG,SAAS,IAAI,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,GAAG,GAAG,GAAG,GAAG,OAAO,CAAC,SAAS,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;KACnF;AAED,IAAA,OAAO,GAAG;AAEN,QAAA,QAAQ,EAAE,IAAI;AACd,QAAA,aAAa,EAAE,KAAK;AACpB,QAAA,KAAK,EAAE,IAAI;AACX,QAAA,UAAU,EAAE,KAAK;AACjB,QAAA,OAAO,EAAE,KAAK;AACd,QAAA,MAAM,EAAE,KAAK;AACb,QAAA,QAAQ,EAAE,EAAE;AACZ,QAAA,SAAS,EAAE,KAAK;AAChB,QAAA,IAAI,EAAE,KAAK;AACX,QAAA,KAAK,EAAE,EAAE;AACT,QAAA,OAAO,EAAE,KAAK;AACd,QAAA,WAAW,EAAE,MAAM;QACnB,MAAM,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,OAAO,EAAE,WAAW;KACtD,CAAC;AAEF,IAAA,IAAI,MAAM,GAAQ,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC;IAC/B,IAAI,QAAQ,GAAmB,OAAO,CAAC,MAAM,IAAa,OAAO,CAAC,MAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,GAAG,CAAC,GAAG,WAAW,IAAI,OAAO,CAAC,WAAW,IAAI,IAAI,GAAG,GAAG,GAAG,OAAO,CAAC,WAAW,GAAG,EAAE,CAAC,IAAI,GAAG,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;IACjN,IAAI,QAAQ,GAAW,MAAM,CAAC,QAAQ,IAAI,OAAO,GAAG,WAAW,IAAI,MAAM,CAAC,QAAQ,IAAI,OAAO,GAAG,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,MAAM,CAAC,QAAQ,GAAG,IAAI,GAAG,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC;AACpL,IAAA,IAAI,UAAwD,CAAC;IAE7D,IAAI,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,EAAE;QAE3B,QAAQ,IAAI,GAAG,CAAC;KACnB;AAED,IAAA,IAAI,MAAM,CAAC,IAAI,KAAK,EAAE,EAAE;AAEpB,QAAA,QAAQ,IAAI,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,GAAG,CAAC;KACnD;SAAM;QAEH,QAAQ,IAAI,cAAc,CAAC;KAC9B;AAED,IAAA,IAAI,MAAM,CAAC,QAAQ,IAAI,GAAG,EAAE;AAExB,QAAA,QAAQ,IAAI,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,kBAAkB,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,iBAAiB,EAAE,GAAG,CAAC,CAAC;KACtI;SAAM;QAEH,QAAQ,IAAI,OAAO,CAAA;KACtB;;IAGD,QAAQ,GAAG,QAAQ,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;AAEzC,IAAA,MAAM,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,EAAC,SAAS,EAAE,IAAI,EAAC,CAAC,CAAC;AAElD,IAAA,OAAO,CAAC,QAAQ,GAAG,QAAQ,CAAC;AAE5B,IAAA,IAAI,OAAO,CAAC,IAAI,IAAI,IAAI,EAAE;QAEtB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,EAAE;AAExC,YAAA,MAAM,MAAM,GAAa,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,QAAQ,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC;AAChG,YAAA,MAAM,MAAM,GAAa,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,IAAI,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC;YAE5G,MAAM,MAAM,GAAa,EAAE,CAAC;YAE5B,MAAM,CAAC,GAAG,EAAE,CAAC;AAEb,YAAA,OAAO,MAAM,CAAC,KAAK,EAAE,EAAE;AAEnB,gBAAA,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACrB;AAED,YAAA,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC;YAEvB,OAAO,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SACnC;KACJ;AAED,IAAA,IAAI,YAAY,IAAI,OAAO,EAAE;AAEzB,QAAA,UAAU,GAAiD,OAAO,CAAC,UAAU,CAAC;KACjF;SAAM;QAEH,UAAU,GAAG,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC;AAChF,gBAAA,KAAK,EAAE,CAAS,OAAO,CAAC,KAAK;AAC7B,gBAAA,MAAM,EAAE,CAAS,OAAO,CAAC,MAAM;AAClC,aAAA,CAAC,GAAG,CAAC,WAAW,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,SAAS,CAAC,CAAC;KACjF;AAED,IAAA,IAAI,UAAU,CAAC,MAAM,IAAI,CAAC,EAAE;AAExB,QAAA,MAAM,IAAI,KAAK,CAAC,CAAA,uBAAA,CAAyB,CAAC,CAAC;KAC9C;AAED,IAAA,IAAI,OAAO,UAAU,IAAI,QAAQ,EAAE;AAE/B,QAAA,UAAU,GAAY,UAAW,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;KAChD;SAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;AAEnC,QAAA,UAAU,GAAG,CAAC,UAAU,CAAC,CAAC;KAC7B;IAED,UAAU,GAAG,UAAU,CAAC,GAAG,CAAC,CAAC,SAAqC,KAAuB;AAErF,QAAA,IAAI,OAAO,SAAS,IAAI,QAAQ,EAAE;YAE9B,MAAM,KAAK,GAAa,SAAS,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YAEnD,OAAO;AAEH,gBAAA,KAAK,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;AAChB,gBAAA,MAAM,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;aACpB,CAAA;SACJ;AAED,QAAA,OAAO,SAAS,CAAC;AACrB,KAAC,CAAC,CAAC;AACH,IAAA,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;;AAGjE,IAAA,KAAK,MAAM,SAAS,IAAyB,UAAU,EAAE;QAErD,IAAI,OAAO,CAAC,OAAO,IAAI,OAAO,CAAC,OAAO,EAAE;YAEpC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAI,CAAA,EAAA,QAAQ,CAAsB,oBAAA,CAAA,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;AAC7F,YAAA,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA,CAAA,EAAI,QAAQ,CAAA,EAAG,IAAI,CAAA,mBAAA,CAAqB,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC,CAAG,EAAA,SAAS,CAAC,KAAK,CAAI,CAAA,EAAA,SAAS,CAAC,MAAM,CAAE,CAAA,CAAC,CAAC,CAAC;SAC/H;AAED,QAAA,MAAM,EAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAC,GAAG,MAAM,aAAa,CAAC,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,CAAC,CAAC;AAEhG,QAAA,IAAI;YAEA,MAAM,IAAI,GAAW,CAAA,EAAA,EAAK,SAAS,CAAC,KAAK,CAAA,CAAA,EAAI,SAAS,CAAC,MAAM,CAAA,CAAA,CAAG,CAAC;YAEjE,MAAM,OAAO,CAAC,aAAa,CAAC,MAAM,GAAG,4BAA4B,CAAC,CAAC;YACnE,MAAM,IAAI,CAAC,YAAY,CAAC;gBACpB,WAAW,EAAE,OAAO,CAAC,WAAW;AACnC,aAAA,CAAC,CAAC;AAEH,YAAA,IAAI,OAAO,CAAC,OAAO,EAAE;gBAEjB,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC,OAAuB;;AAEvC,gBAAA,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,CAAI,CAAA,EAAA,QAAQ,CAAG,EAAA,IAAI,MAAM,OAAO,CAAC,IAAI,EAAE,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC,GAAW,EAAE,GAAW,KAAK,GAAG,CAAC,WAAW,EAAE,CAAC,CAAA,CAAA,EAAI,OAAO,CAAC,IAAI,EAAE,CAAE,CAAA,CAAC,CAAC,CAAC;;qBAE7J,EAAE,CAAC,WAAW,EAAE,CAAC,EAAC,OAAO,EAAC,KAAK,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA,CAAA,EAAI,QAAQ,CAAA,EAAG,IAAI,CAAA,GAAA,EAAM,OAAO,CAAA,CAAE,CAAC,CAAC,CAAC;AAC5F,qBAAA,EAAE,CAAC,eAAe,EAAE,CAAC,OAAgB,KAAI;AAEtC,oBAAA,MAAM,OAAO,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC;oBAClC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA,CAAA,EAAI,QAAQ,CAAA,EAAG,IAAI,CAAA,GAAA,EAAM,OAAO,IAAI,OAAO,CAAC,SAAS,CAAI,CAAA,EAAA,OAAO,CAAC,GAAG,EAAE,CAAA,CAAE,CAAC,CAAC,CAAA;AACtG,iBAAC,CAAC,CAAC;aACV;AAED,YAAA,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA,CAAA,EAAI,QAAQ,CAAA,EAAG,IAAI,CAAU,QAAA,CAAA,CAAC,GAAG,GAAG,CAAC,CAAC;AAE/D,YAAA,IAAI,OAAO,CAAC,KAAK,IAAI,IAAI,EAAE;gBAEvB,MAAM,GAAG,GAAW,MAAM,OAAO,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC,CAAC;gBAElD,MAAM,SAAS,CAAC,GAAG,GAAG,aAAa,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC;AACpD,gBAAA,GAAG,GAAG,SAAS,GAAG,GAAG,GAAG,aAAa,CAAC;;gBAGtC,OAAO,CAAC,EAAE,CAAC,MAAM,EAAE,YAAY,MAAM,EAAE,CAAC,GAAG,EAAE,EAAC,SAAS,EAAE,IAAI,EAAC,CAAC,CAAC,CAAC;;gBAEjE,OAAO,CAAC,EAAE,CAAC,mBAAmB,EAAE,YAAY,MAAM,EAAE,CAAC,GAAG,EAAE,EAAC,SAAS,EAAE,IAAI,EAAC,CAAC,CAAC,CAAC;;gBAE9E,OAAO,CAAC,EAAE,CAAC,oBAAoB,EAAE,YAAY,MAAM,EAAE,CAAC,GAAG,EAAE,EAAC,SAAS,EAAE,IAAI,EAAC,CAAC,CAAC,CAAC;aAClF;AAED,YAAA,MAAM,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,EAAC,SAAS,EAAE,aAAa,EAAC,CAAC,CAAC;AAEjD,YAAA,IAAI,OAAO,CAAC,UAAU,EAAE;AAEpB,gBAAA,MAAM,UAAU,GAEZ,OAAO,OAAO,CAAC,UAAU,IAAI,QAAQ,IAAI,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,OAAO,CAAC,UAAU,CAAC,IAAI,EAAC,IAAI,EAAE,OAAO,OAAO,CAAC,UAAU,IAAI,QAAQ,IAAI,OAAO,CAAC,UAAU,IAAI,OAAO,CAAC,QAAQ,GAAG,MAAM,IAAI,gBAAgB,EAAC,CAAA;AAE1M,gBAAA,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;oBAEvB,UAAU,CAAC,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,CAAI,CAAA,EAAA,SAAS,CAAC,KAAK,CAAA,CAAA,EAAI,SAAS,CAAC,MAAM,CAAM,IAAA,CAAA,CAAC,CAAA;iBACzG;AAED,gBAAA,IAAI,OAAO,CAAC,OAAO,EAAE;oBAEjB,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAI,CAAA,EAAA,QAAQ,CAAG,EAAA,IAAI,8BAA8B,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;iBAC/G;AAED,gBAAA,MAAM,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;aACrC;AAED,YAAA,IAAI,OAAO,CAAC,OAAO,EAAE;AAEjB,gBAAA,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAI,CAAA,EAAA,QAAQ,CAAG,EAAA,IAAI,CAA0B,wBAAA,CAAA,CAAC,CAAC,CAAC;aAC5E;YAED,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,OAAO,KAA0C,KAAI;;AAGlF,gBAAA,OAAO,MAAM,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,MAAsB,KAAI;oBAEzE,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;;wBAG7B,MAAM,CAAC,KAAK,GAAa,CAAC,MAAM,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,IAAgB,KAAK,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;qBAC3F;;AAGD,oBAAA,IAAI,KAAK,CAAC,OAAO,CAAC,OAAO,EAAE;AAEvB,wBAAA,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,EAAC,MAAM,EAAC,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;qBACpD;AAED,oBAAA,OAAO,MAAM,CAAC;AAClB,iBAAC,CAAC,CAAC;AACP,aAAC,EAAE,EAAC,OAAO,EAAC,CAAC,CAAC;AAEd,YAAA,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,EAAE;AAErB,gBAAA,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,IAAY,KAAK,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;AACxD,gBAAA,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAY,KAAK,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;gBACtD,KAAK,CAAC,IAAI,CAAC,EAAC,KAAK,EAAE,SAAS,CAAC,KAAK,EAAE,MAAM,EAAE,SAAS,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAC,CAAC,CAAC;gBAElF,IAAI,OAAO,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,EAAE,EAAE;AAErC,oBAAA,IAAI,GAAG,IAAI,CAAC,IAAI,IAAI,EAAE,CAAC;iBAC1B;aACJ;SAEJ;QAAC,OAAO,KAAU,EAAE;AAEjB,YAAA,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;SACxB;gBAAS;AAEN,YAAA,MAAM,IAAI,CAAC,KAAK,EAAE,CAAC;AACnB,YAAA,MAAM,OAAO,CAAC,KAAK,EAAE,CAAC;AACtB,YAAA,MAAM,OAAO,CAAC,KAAK,EAAE,CAAC;SACzB;AAED,QAAA,IAAY,OAAO,CAAC,KAAK,GAAG,CAAC,EAAE;AAE3B,YAAA,MAAM,KAAK,CAAS,OAAO,CAAC,KAAK,CAAC,CAAC;SACtC;KACJ;IAED,IAAI,QAAQ,GAAuB,SAAS,CAAC;IAC7C,IAAI,MAAM,GAAuB,SAAS,CAAC;IAC3C,IAAI,UAAU,GAAuB,SAAS,CAAC;IAC/C,IAAI,UAAU,GAAuB,SAAS,CAAC;IAC/C,IAAI,aAAa,GAAuB,SAAS,CAAC;IAClD,IAAI,gBAAgB,GAAuB,SAAS,CAAC;AAErD,IAAA,IAAI,OAAO,CAAC,QAAQ,IAAI,IAAI,EAAE;QAE1B,IAAI,MAAM,GAAW,CAAC,GAAG,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5C,IAAI,GAAG,GAAW,MAAM,CAAC;AAEzB,QAAA,IAAI,OAAO,CAAC,QAAQ,EAAE;YAElB,MAAM,EAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAC,GAAG,MAAM,aAAa,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC,CAAC,EAAE,QAAQ,EAAE,WAAW,CAAC,CAAC;YAEpG,MAAM,IAAI,CAAC,YAAY,CAAC;gBACpB,WAAW,EAAE,OAAO,CAAC,WAAW;AACnC,aAAA,CAAC,CAAC;AAEH,YAAA,MAAM,SAAS,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;YAChC,MAAM,IAAI,GAAW,CAAA,EAAA,EAAK,SAAS,CAAC,KAAK,CAAA,CAAA,EAAI,SAAS,CAAC,MAAM,CAAA,CAAA,CAAG,CAAC;AAEjE,YAAA,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA,CAAA,EAAI,QAAQ,CAAA,EAAG,IAAI,CAAU,QAAA,CAAA,CAAC,GAAG,GAAG,CAAC,CAAC;AAE/D,YAAA,IAAI,OAAO,CAAC,KAAK,IAAI,IAAI,EAAE;gBAEvB,MAAM,GAAG,GAAW,MAAM,OAAO,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC,CAAC;gBAElD,MAAM,SAAS,CAAC,GAAG,GAAG,aAAa,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC;AACpD,gBAAA,GAAG,GAAG,SAAS,GAAG,GAAG,GAAG,aAAa,CAAC;;gBAGtC,OAAO,CAAC,EAAE,CAAC,MAAM,EAAE,YAAY,MAAM,EAAE,CAAC,GAAG,EAAE,EAAC,SAAS,EAAE,IAAI,EAAC,CAAC,CAAC,CAAC;;gBAEjE,OAAO,CAAC,EAAE,CAAC,mBAAmB,EAAE,YAAY,MAAM,EAAE,CAAC,GAAG,EAAE,EAAC,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAC,CAAC,CAAC,CAAC;;gBAE3F,OAAO,CAAC,EAAE,CAAC,oBAAoB,EAAE,YAAY,MAAM,EAAE,CAAC,GAAG,EAAE,EAAC,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAC,CAAC,CAAC,CAAC;aAC/F;AAED,YAAA,MAAM,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,EAAC,SAAS,EAAE,aAAa,EAAC,CAAC,CAAC;AAEjD,YAAA,MAAM,MAAM,GAAG,MAAM,KAAK,CAAC,MAAM,EAAE,EAAC,MAAM,EAAE,KAAK,EAAC,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,EAAC,GAAG,EAAE,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,EAAC,CAAC,CAAC,CAAC;AAErH,YAAA,KAAK,MAAM,EAAC,IAAI,EAAE,MAAM,EAAC,IAAI,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE;gBAE3C,IAAI,IAAI,CAAC,GAAG,IAAI,SAAS,CAAC,YAAY,EAAE;oBAEpC,MAAM,QAAQ,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,SAAS,CAAE,IAAgB,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,OAAM,GAAG,KAAG;AAEhF,wBAAA,MAAM,IAAI,GAAa,GAAG,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,uBAAuB,CAAC,CAAC,CAAC;AAE9E,wBAAA,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,EAAE;AAClB,4BAAA,OAAO,GAAG,CAAC;yBACd;;AAGD,wBAAA,OAAO,MAAM,IAAI,CAAC,QAAQ,CAAC,CAAC,KAG3B,KAAc,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,IAAI,EAAE,EAAC,GAAG,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC;qBAC9F,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAa,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,CAAW,KAAc,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;AAE9E,oBAAA,IAAI,QAAQ,CAAC,MAAM,IAAI,CAAC,EAAE;AAEtB,wBAAA,MAAO,CAAC,GAAG,CAAC,MAAM,CAAC,MAAO,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;qBACpD;yBAAM;AAEF,wBAAA,IAAgB,CAAC,GAAG,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI,KAAK,GAAG,IAAI,GAAG,CAAC,MAAM,IAAI,CAAC,GAAG,EAAE,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;qBAClH;iBACJ;aACJ;AAED,YAAA,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,EAAC,MAAM,EAAE,KAAK,EAAE,kBAAkB,EAAE,IAAI,EAAC,CAAC,CAAC,IAAI,CAAC;AAEzE,YAAA,MAAM,IAAI,CAAC,KAAK,EAAE,CAAC;AACnB,YAAA,MAAM,OAAO,CAAC,KAAK,EAAE,CAAC;AACtB,YAAA,MAAM,OAAO,CAAC,KAAK,EAAE,CAAC;SACzB;QAED,MAAM,EAAC,IAAI,EAAE,UAAU,EAAC,IAGnB,MAAM,SAAS,CAAC,GAAG,EAAE,EAAC,kBAAkB,EAAE,IAAI,EAAC,CAAC,CAAC,IAAI,CAAC,MAAM,IAAG;AAEhE,YAAA,OAAO,EAAC,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,EAAC,MAAM,EAAE,KAAK,EAAE,kBAAkB,EAAE,IAAI,EAAC,CAAC,CAAC,IAAI,EAAC,CAAA;SAC7G,CAAC,CAAC,CAAC;QAEJ,MAAM,EAAC,IAAI,EAAE,SAAS,EAAE,UAAU,EAAE,gBAAgB,EAAC,IAGhD,MAAM,SAAS,CAAC,GAAG,EAAE,EAAC,YAAY,EAAE,IAAI,EAAC,CAAC,CAAC,IAAI,CAAC,MAAM,IAAG;YAE1D,OAAO,EAAC,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,EAAC,MAAM,EAAE,KAAK,EAAC,CAAC,CAAC,IAAI,EAAC,CAAA;SACnF,CAAC,CAAC,CAAC;AAEJ,QAAA,IAAI,OAAO,GAAW,OAAO,CAAC,QAAQ,CAAC;QAEvC,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,MAAM,EAAE;YAE7B,OAAO,IAAI,MAAM,CAAC;SACrB;AAED,QAAA,UAAU,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,UAAoB,CAAC;AACzD,QAAA,UAAU,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,UAAoB,CAAC;AAEzD,QAAA,gBAAgB,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,iBAA2B,CAAC;AACtE,QAAA,aAAa,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,aAAuB,CAAC;AAE/D,QAAA,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA,CAAA,EAAI,QAAQ,CAAA,kBAAA,CAAoB,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC,UAAU,GAAG,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;;AAGvH,QAAA,MAAM,SAAS,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;AAElC,QAAA,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA,CAAA,EAAI,QAAQ,CAAA,kBAAA,CAAoB,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;AAE1H,QAAA,MAAM,SAAS,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;;AAGrC,QAAA,MAAM,SAAS,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;AAEpC,QAAA,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA,CAAA,EAAI,QAAQ,CAAA,kBAAA,CAAoB,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC,gBAAgB,GAAG,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;;AAElI,QAAA,MAAM,SAAS,CAAC,gBAAgB,EAAE,SAAS,CAAC,CAAC;AAE7C,QAAA,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA,CAAA,EAAI,QAAQ,CAAA,kBAAA,CAAoB,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC,aAAa,GAAG,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;AAEtI,QAAA,MAAM,SAAS,CAAC,aAAa,EAAE,gBAAgB,CAAC,CAAC;;AAGjD,QAAA,MAAM,SAAS,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;AAEpC,QAAA,IAAI,OAAO,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,EAAE,EAAE;YAErD,MAAM,KAAK,GAA4B,IAAI,CAAC,KAAK,CAAC,qDAAqD,CAAC,CAAC;YAEzG,IAAI,KAAK,EAAE;AAEP,gBAAA,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAA,4BAAA,EAA+B,GAAG,CAAA,QAAA,CAAU,CAAC,CAAC;aAC/E;AAED,YAAA,QAAQ,GAAG,OAAO,CAAC,QAAQ,GAAG,OAAO,CAAC;;AAEtC,YAAA,MAAM,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;SACnC;KACJ;IAED,MAAM,WAAW,GAAqC,IAAI,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,IAAY,KAAK,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAElH,IAAA,IAAI,OAAO,CAAC,KAAK,EAAE;AAEf,QAAA,IAAI,MAAM,GAAW,OAAO,CAAC,QAAQ,CAAC;QACtC,IAAI,IAAI,GAAW,sBAAsB,CAAC;QAE1C,IAAI,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,EAAE;YAE3B,MAAM,IAAI,KAAK,CAAC;SACnB;AAED,QAAA,IAAI,WAAW,CAAC,IAAI,IAAI,CAAC,EAAE;AAEvB,YAAA,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,CAAA,CAAA,EAAI,QAAQ,CAAA,wBAAA,CAA0B,CAAC,CAAC,CAAC;SACvE;aAAM;YAEH,IAAI,GAAG,UAAU,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AACpC,YAAA,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA,CAAA,EAAI,QAAQ,CAAA,WAAA,CAAa,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,0BAA0B,CAAC;AACnI,gBAAA,KAAK,CAAC,KAAK,CAAC,CAAG,EAAA,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;SAC7D;;AAGD,QAAA,MAAM,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;KACjC;IAED,OAAO;AACH,QAAA,MAAM,EAAE,CAAC,GAAG,MAAM,CAAC;AACnB,QAAA,KAAK,EAAE;AAEH,YAAA,IAAI,EAAE,QAAQ;AACd,YAAA,KAAK,EAAE,MAAM;AACb,YAAA,GAAG,EAAE;AAED,gBAAA,GAAG,EAAE,UAAU;AACf,gBAAA,GAAG,EAAE,UAAU;AACf,gBAAA,MAAM,EAAE,aAAa;AACrB,gBAAA,SAAS,EAAE,gBAAgB;AAC9B,aAAA;SAEJ,EAAE,KAAK,EAAE,CAAC,GAAG,KAAK,CAAC,EAAE,KAAK,EAAE,IAAI;KACpC,CAAC;AACN,CAAC;AAEK,SAAU,YAAY,CAAC,SAAiB,EAAA;AAE1C,IAAA,OAAO,SAAS,IAAI,GAAG,IAAI,SAAS,IAAI,IAAI;;QAExC,SAAS,IAAI,GAAG,IAAI,SAAS,IAAI,GAAG,IAAI,SAAS,IAAI,GAAG,CAAC;AACjE,CAAC;AAEK,SAAU,SAAS,CAAC,MAAc,EAAA;AAEpC,IAAA,MAAM,MAAM,GAAe,CAAC,EAAE,CAAC,CAAC;IAChC,IAAI,GAAG,GAAW,EAAE,CAAC;AAErB,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QAEpC,IAAI,GAAG,GAAW,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QAEnC,IAAI,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE;YAEjC,IAAI,CAAC,GAAW,CAAC,CAAC;YAElB,OAAO,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE;AAE1B,gBAAA,IAAI,YAAY,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE;AAE3C,oBAAA,CAAC,EAAE,CAAC;oBACJ,SAAS;iBACZ;gBAED,MAAM;aACT;AAED,YAAA,IAAI,GAAG,KAAK,EAAE,EAAE;;gBAGZ,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBACxB,GAAG,GAAG,EAAE,CAAC;aACZ;;AAGD,YAAA,IAAI,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE;;gBAG1B,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aAC3B;YAED,CAAC,GAAG,CAAC,CAAC;YACN,SAAS;SACZ;AAED,QAAA,IAAI,GAAG,IAAI,GAAG,EAAE;AAEZ,YAAA,IAAI,GAAG,KAAK,EAAE,EAAE;;gBAEZ,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBACxB,GAAG,GAAG,EAAE,CAAC;aACZ;AAED,YAAA,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YAChB,SAAS;SACZ;AAED,QAAA,IAAI,GAAG,IAAI,GAAG,EAAE;AAEZ,YAAA,IAAI,GAAG,KAAK,EAAE,EAAE;;gBAEZ,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBACxB,GAAG,GAAG,EAAE,CAAC;aACZ;YAED,IAAI,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,GAAG,EAAE;gBAE7B,GAAG,IAAI,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;aAC7B;YAED,GAAG,IAAI,GAAG,CAAC;YACX,SAAS;SACZ;QAED,GAAG,IAAI,GAAG,CAAC;AACX,QAAA,IAAI,GAAG,IAAI,IAAI,EAAE;YAEb,GAAG,IAAI,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;YAC1B,SAAS;SACZ;QAED,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,EAAE;YAE1B,IAAI,CAAC,GAAG,CAAC,CAAC;AACV,YAAA,OAAO,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE;AACxB,gBAAA,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBACvB,GAAG,IAAI,GAAG,CAAC;AACX,gBAAA,IAAI,GAAG,IAAI,IAAI,EAAE;oBACb,GAAG,IAAI,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;oBAC1B,SAAS;iBACZ;gBACD,IAAI,GAAG,IAAI,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE;oBACzB,MAAM;iBACT;aACJ;YACD,SAAS;SACZ;QAED,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,EAAE;YAC1B,MAAM,IAAI,GAAG,GAAG,CAAC;AACjB,YAAA,MAAM,KAAK,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;YACrC,IAAI,QAAQ,GAAG,CAAC,CAAC;YACjB,IAAI,CAAC,GAAG,CAAC,CAAC;AACV,YAAA,OAAO,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE;AACxB,gBAAA,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AACvB,gBAAA,IAAI,GAAG,IAAI,IAAI,EAAE;oBACb,GAAG,IAAI,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;AAC9B,oBAAA,CAAC,EAAE,CAAC;oBACJ,SAAS;iBACZ;gBACD,GAAG,IAAI,GAAG,CAAC;AACX,gBAAA,IAAI,GAAG,IAAI,IAAI,EAAE;AACb,oBAAA,QAAQ,EAAE,CAAC;iBACd;AAAM,qBAAA,IAAI,GAAG,IAAI,KAAK,EAAE;AACrB,oBAAA,QAAQ,EAAE,CAAC;iBACd;AACD,gBAAA,IAAI,QAAQ,IAAI,CAAC,EAAE;oBACf,MAAM;iBACT;aACJ;YACD,CAAC,GAAG,CAAC,CAAC;SACT;KACJ;AAED,IAAA,IAAI,GAAG,KAAK,EAAE,EAAE;;QAEZ,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KAC3B;AAED,IAAA,OAAO,MAAM,CAAC;AAClB;;;;"}