var critical=function(e){"use strict";function t(e,t){let r=e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;if(r)try{return r.call(e,t)}catch(e){return!1}else{let r=e.ownerDocument.querySelectorAll(t),l=r.length;for(;l&&l--;)if(r[l]===e)return!0}return!1}function r(e,t){if("data:"===e.substr(0,5))return e;const r=new URL(t,window.location),l=new URL(e,r);if(r.protocol!=l.protocol||r.host!=l.host||l.host!=window.location.host||r.port!=l.port||l.port!=window.location.port||r.port!=l.port||l.protocol!=window.location.protocol)return l.toString();const n=r.pathname.split("/"),a=l.pathname.split("/");for(;a.length>0&&n.length>0&&a[0]==n[0];)n.shift(),a.shift();let o=n.length;for(;o-- >1;)a.unshift("..");return a.join("/")+l.search}async function l(e={}){e=Object.assign({fonts:!0},e);const l=new Set,n=["all","print",""],a=[],o=window.innerHeight,s=document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT,(function(e){return NodeFilter.FILTER_ACCEPT}),!0),i=new Set,c=new Set,f=new Map;if([].push.apply(a,Array.from(document.styleSheets).filter((e=>""==e.media.mediaText||"print"!=e.media.mediaText&&window.matchMedia(e.media.mediaText).matches)).map((e=>{try{return Array.from(e.cssRules||e.rules).map((e=>({rule:e,match:!1})))}catch(t){console.error(JSON.stringify({message:t.message,stylesheet:e.href},null,1))}return!1})).filter((e=>e)).flat()),0===a.length)return[];let u,p,h=a.length;for(;s.nextNode();){let e=s.currentNode;if(e.nodeType==Node.ELEMENT_NODE&&(e.getBoundingClientRect().top<o&&!["SCRIPT","LINK","HEAD","META","TITLE"].includes(e.tagName)))for(let r=0;r<h;r++)if(!a[r].match)if(a[r].rule instanceof CSSStyleRule)t(e,a[r].rule.selectorText)&&(a[r].match=!0,a[r].rule.style.getPropertyValue("font-family")&&a[r].rule.style.getPropertyValue("font-family").split(/\s*,\s*/).forEach((e=>"inherit"!=e&&c.add(e.replace(/(['"])([^\1\s]+)\1/,"$2")))));else if(a[r].rule instanceof CSSMediaRule){let e=Array.from(a[r].rule.cssRules||a[r].rule.rules).map((e=>({rule:e,match:!1})));e.unshift(r+1,0),a.splice.apply(a,e),h=a.length}else if(a[r].rule instanceof CSSImportRule)try{if(!window.matchMedia(a[r].rule.media.mediaText).matches)continue;let e=Array.from(a[r].rule.styleSheet.cssRules||a[r].rule.styleSheet.rules).map((e=>({rule:e,match:!1})));e.unshift(r+1,0),a.splice.apply(a,e),h=a.length,l.add("/* @import: "+a[r].rule.href+" from "+(a[r].rule.parentStyleSheet.href||`inline #${d}`)+" */")}catch(e){console.error(e.message),console.error(a[r].rule.href)}else a[r].rule instanceof CSSFontFaceRule&&a[r].rule.style.getPropertyValue("font-family")&&a[r].rule.style.getPropertyValue("src")&&i.add(a[r].rule)}let y="",d=-1;e:for(let e=0;e<h;e++){if(!a[e].match)continue;u=a[e].rule;let t=!1;if(f.has(u.parentStyleSheet)?y&&y!=f.get(u.parentStyleSheet).file&&(t=!0):(f.set(u.parentStyleSheet,{base:(u.parentStyleSheet.href&&u.parentStyleSheet.href.replace(/[?#].*/,"")||location.pathname).replace(/([^/]+)$/,""),file:u.parentStyleSheet.href||"inline #"+ ++d}),t=!0),t)try{console.log("analysing "+f.get(u.parentStyleSheet).file),l.add("/* file: "+f.get(u.parentStyleSheet).file+" */")}catch(e){console.error(e.message),console.error(u.parentStyleSheet)}for(y=f.get(u.parentStyleSheet).file,p=u.cssText,"inline"!=y&&(p=p.replace(/url\(([^)%\s]*?)\)/g,(function(e,t){return"url("+r(t=(t=t.trim()).replace(/^(['"])([^\1\s]+)\1/,"$2"),f.get(u.parentStyleSheet).base)+")"})));u.parentRule;){if(u=u.parentRule,"print"==u.conditionText)continue e;if(n.includes(u.conditionText)||(p="@media "+u.conditionText+" {"+p+"}"),!u.parentRule)break}if(u.parentStyleSheet){let e=u.parentStyleSheet.media.mediaText;if("print"==e)continue e;n.includes(e)||(p="@media "+e+" {"+p+"}")}l.has(p)&&l.delete(p),l.add(p)}const m=new Map;if(e.fonts){let e,t,l,n,a;for(n of i)if(n.style.getPropertyValue("font-family").split(/\s*,\s*/).some((e=>c.has(e.replace(/(['"])([^\1\s]+)\1/,"$2"))))){for(a={fontFamily:n.style.getPropertyValue("font-family").replace(/(['"])([^\1\s]+)\1/,"$2"),src:n.style.getPropertyValue("src").replace(/(^|[,\s*])local\([^)]+\)\s*,?\s*?/g,"").replace(/url\(([^)%\s]+)\)([^,]*)(,?)\s*/g,((e,t,l,a)=>(t=t.replace(/(['"])([^\1\s]+)\1/,"$2"),f.has(n.parentStyleSheet)||f.set(n.parentStyleSheet,{base:n.parentStyleSheet.href.replace(/([^/]+)$/,""),file:n.parentStyleSheet.href}),"url("+r(t,f.get(n.parentStyleSheet).base)+")"+a))).trim(),properties:{}},e=n.style.length;e--;)t=n.style.item(e),l=n.style.getPropertyValue(t),"font-family"!=t&&"src"!=t&&""!==l&&void 0!==l&&(a.properties[t.replace(/([A-Z])/g,((e,t)=>"-"+t.toLowerCase()))]=l);m.set(JSON.stringify(a),a)}}return{styles:[...l],fonts:[...m.values()]}}async function n(e,t,r="application/octet-stream; charset=utf-8"){const l=URL.createObjectURL(new Blob(e,{type:r})),n=document.createElement("a");return document.body.append(n),n.style.display="none",n.download=t,n.href=l,n.dispatchEvent(new MouseEvent("click")),URL.revokeObjectURL(l),e}return e.download=async function(e="critical.css"){return l().then((async t=>(await n(t.styles,e,"text/css; charset=utf-8").then((async()=>{var r;t.fonts.length>0&&await n([(r=t.fonts,"/* font preloader script: "+r.length+' */\n"fonts" in document && '+JSON.stringify([...r],null,1)+".forEach(font => new FontFace(font.fontFamily, font.src, font.properties).load().then(font => document.fonts.add(font)))")],e.replace(/\.css$/,".js"),"text/javascript; charset=utf-8")})),t)))},e.extract=l,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
